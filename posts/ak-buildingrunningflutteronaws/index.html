
<!doctype html>
<html>

<head>
  <title>  Building and running Flutter mobile applications for Android on AWS Device Farm  </title>
  <meta charset="utf-8"/> 
  
  <meta property="og:type" content="article"/>
  <meta property="og:title" content="Building and running Flutter mobile applications for Android on AWS Device Farm"/>
  
  <meta property="article:author" content="[Alexander Kroll]"/>
  <meta property="og:image" content="https://nttdata-dach.github.io/posts/img/AK-BuildingRunningFlutterOnAWS/title-image.jpg"/>
  <meta property="og:url" content="https://nttdata-dach.github.io/posts/ak-buildingrunningflutteronaws/"/>
  <meta property="og:description" content="This article will give you an overview on how to build and run a Flutter cross-platform mobile application for the Android OS platform in the cloud. We will cover all the steps from the basic app itself to the integration with Appium, and ultimately the deployment and testing on several devices in the AWS Device Farm."/>
  
  <script src="https://nttdata-dach.github.io/js/darkmode.js"></script>
  <script src="https://nttdata-dach.github.io/js/modal.js"></script>
  
  <link rel="stylesheet" href="https://nttdata-dach.github.io/css/syntax.css">
  <link rel="stylesheet" href="https://nttdata-dach.github.io/css/main.css">
  <link href="" rel="feed" type="application/rss+xml" title="Technology Blog" />
  <script src="https://kit.fontawesome.com/ed40ccf940.js" crossorigin="anonymous"></script>
</head>

<body>
  <header>
    <a href="/"><img id="logo" src="/images/GlobalLogo_NTTDATA_White.png"></a>
    
    <nav>

      
        <a   class="emphasized" 
           href="/posts">All Blogposts</a>
      
        <a target="_blank"   
           href="mailto:techblog@nttdata.com">Contact</a>
      
        <a target="_blank"   
           href="https://de.nttdata.com/">About Us</a>
      

      <a target="_blank" class="github" href="https://github.com/NTTDATA-DACH/"><img src="/images/GitHub.png"></a>
      <div class="theme-switch-wrapper">
        <label class="theme-switch" for="checkbox">
            <input type="checkbox" id="checkbox" onChange="switchMode()"/>
            <div class="slider round"></div>
        </label>
      </div>
    </nav>
  </header>



  <div>
    <div class="modal" id="uphillModal">
    <div class="modal-background"></div>
    <div class="modal-content">
        <picture class="image is-4by3" id="modalContainer">
            <div id="modalInner">
                <img src="" alt="" id="modalImg">
                <figcaption id="caption">
                </figcaption>
            </div>
        </picture>
    </div>
    <button class="modal-close is-large" aria-label="close"></button>
</div>
</div>

<div class="emobanner article">
    <h1>
        <span class="pre">03.11.2023
        
         - Alexander Kroll - <i class="fa-solid fa-book-open"></i> 10 min read
        
        </span>
        Building and running Flutter mobile applications for Android on AWS Device Farm
        
    </h1>

    
        <div class="article-header-img" style="background: url('/posts/img/AK-BuildingRunningFlutterOnAWS/title-image.jpg') no-repeat center center; background-size: cover">
            <div class="article-header-gradient"></div>
        </div> 
    


    
</div>

<main>

    <div class="container">
        <div class="spacer"></div>
        <div class="content">
            
           
            <h2 id="setting-the-scene">Setting the scene</h2>
<p>Building, testing, and ensuring that your mobile application runs correctly on different devices and operating systems can become very cumbersome and expensive over time.  The effort required for various device management tasks, such as maintaining the physical infrastructure, patching and updating devices, can be very costly for an organization if these tasks are performed by a developer or someone else in the organization. Imagine you have 15 or 20 different devices that need to be patched manually. This will take a couple of hours if everything is working as expected. The maintenance overhead increases linearly with the number of devices you manage. It is not only the different types of devices that are important, but also the combinations of devices and installed OS versions that can dramatically increase the testing effort.</p>
<h2 id="aws-device-farm-to-the-rescue">AWS Device Farm to the rescue</h2>
<p>Relax, there is a solution. AWS Device Farm to the rescue. With AWS Device Farm, AWS offers a solution that makes mobile testing a breeze. AWS Device Farm is a managed service on AWS that allows you to leverage a fleet of mobile devices and mobile environments from AWS via an on-demand model to provision devices for either manual or automated testing.
The good news is, you can try AWS Device Farm and get the first 1000 minutes free.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>You will need the following for the example:</p>
<ul>
<li>Android Studio</li>
<li>Android SDK</li>
<li>Flutter (Version 3.0.5 or higher)</li>
<li>Git</li>
<li>AWS Account</li>
<li>Some free space on your SSD ;-)</li>
</ul>
<h2 id="flutter-sample-app">Flutter sample app</h2>
<p>The sample Flutter app for testing is a simple login page with a username and password that takes you to a welcome page. From there, you can launch a browser application with a search engine web page.</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/alkwwzhxa0savuilq3fv.png" alt="Image description">

</p>
<h2 id="testing-with-appium">Testing with Appium</h2>
<p>Appium is a popular open source test automation framework for use with native, hybrid and mobile web applications. It uses the Webdriver protocol (similar to Selenium) and can be used to test iOS, Android and Windows apps.
Appium is one of the testing frameworks directly supported by the AWS Device Farm.
For more information, see the AWS documentation:
<a href="https://docs.aws.amazon.com/devicefarm/latest/developerguide/test-types-appium.html">https://docs.aws.amazon.com/devicefarm/latest/developerguide/test-types-appium.html</a>
With Appium, you can use specific annotations such as “AndroidFindBy” to identify elements on a mobile app screen, interact with these elements (clicking, entering text, &hellip;) and checking the state of these elements (e.g. is shown or is enabled). This can be done with several programming languages, like Java, Kotlin, Python, JavaScript, etc.</p>
<p>Here are some examples with Java.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// identifying elements with annotations</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@AndroidFindBy</span><span class="p">(</span><span class="n">accessibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;LoginText&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">private</span><span class="w"> </span><span class="n">MobileElement</span><span class="w"> </span><span class="n">loginText</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// identifying elements programmatically</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">MobileElement</span><span class="w"> </span><span class="n">loginText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">driver</span><span class="p">.</span><span class="na">findElementByAccessibilityId</span><span class="p">(</span><span class="s">&#34;LoginText&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// perform a click</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">loginText</span><span class="p">.</span><span class="na">click</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// enter text</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">loginText</span><span class="p">.</span><span class="na">sendKeys</span><span class="p">(</span><span class="s">&#34;Hello&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// asking if element is shown or not</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">loginText</span><span class="p">.</span><span class="na">isDisplayed</span><span class="p">()</span><span class="w">
</span></span></span></code></pre></div><p>For writing Appium tests in Java you can also choose between different testing frameworks, like JUnit or TestNG.</p>
<h2 id="write-appium-tests-for-aws-device-farm">Write Appium tests for AWS Device Farm</h2>
<p>There is a sample app for the AWS Device Farm which illustrates what you need for your Appium tests on the AWS Device Farm.
See <a href="https://github.com/aws-samples/aws-device-farm-appium-tests-for-sample-app">https://github.com/aws-samples/aws-device-farm-appium-tests-for-sample-app</a>
An important step is to create a ZIP file containing all compiled Appium tests, and their dependencies (Appium jars) needed to run the tests. This ZIP file will later be uploaded to the AWS Device Farm along with the APP binary.
The recommended way to implement the tests is to make use of the page pattern, which creates a “shadowed” object of the mobile front-end page. The test can take advantage of Appium’s ability to identify Android application elements such as the input fields and the button by using the <code>@AndroidFindBy</code> annotation with an XPath expression in the object tree and will provide that object as a <code>MobileElement</code>. In addition, you can now configure the possible actions of the page by using public methods to modify the contents of the <code>MobileElement</code> and emit actions on the button.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.alex.flutter_sample.appium.pages</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">io.appium.java_client.AppiumDriver</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">io.appium.java_client.MobileElement</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">io.appium.java_client.pagefactory.AndroidFindBy</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LoginPage</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BasePage</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@AndroidFindBy</span><span class="p">(</span><span class="n">xpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.View/android.view.View/android.view.View/android.view.View/android.widget.EditText[1]&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MobileElement</span><span class="w"> </span><span class="n">username</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@AndroidFindBy</span><span class="p">(</span><span class="n">xpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.View/android.view.View/android.view.View/android.view.View/android.widget.EditText[2]&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MobileElement</span><span class="w"> </span><span class="n">password</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@AndroidFindBy</span><span class="p">(</span><span class="n">accessibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;Login&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MobileElement</span><span class="w"> </span><span class="n">loginButton</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">LoginPage</span><span class="p">(</span><span class="n">AppiumDriver</span><span class="o">&lt;</span><span class="n">MobileElement</span><span class="o">&gt;</span><span class="w"> </span><span class="n">driver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">driver</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isDisplayed</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">loginButton</span><span class="p">.</span><span class="na">isDisplayed</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUsername</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">username</span><span class="p">.</span><span class="na">click</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">wait</span><span class="p">(</span><span class="n">2000</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">username</span><span class="p">.</span><span class="na">clear</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">username</span><span class="p">.</span><span class="na">sendKeys</span><span class="p">(</span><span class="n">username</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setPassword</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">password</span><span class="p">.</span><span class="na">click</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">wait</span><span class="p">(</span><span class="n">2000</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">password</span><span class="p">.</span><span class="na">clear</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">password</span><span class="p">.</span><span class="na">sendKeys</span><span class="p">(</span><span class="n">password</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">clickLogin</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">loginButton</span><span class="p">.</span><span class="na">click</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>An example Appium test could check if a user can go from the <code>LoginPage</code> to the <code>SecondPage</code> when authenticating with the correct credentials. To set up this scenario, we would create an instance of the LoginPage and check that the page loads successfully. We would then simulate user input (username and password)  and trigger a click on the login button. This will cause the page to change and we can ensure that the SecondPage is displayed. Finally, we can take a screenshot of the test run, which will be bundled with the test result of this test run and can be used for manual checks at a later time.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">login_withCorrectCredentials_gotoSecondPage</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">InterruptedException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// given</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">LoginPage</span><span class="w"> </span><span class="n">loginPage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LoginPage</span><span class="p">(</span><span class="n">driver</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">loginPage</span><span class="p">.</span><span class="na">isDisplayed</span><span class="p">(),</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// when</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">loginPage</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&#34;Alex&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">loginPage</span><span class="p">.</span><span class="na">setPassword</span><span class="p">(</span><span class="s">&#34;alex&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">loginPage</span><span class="p">.</span><span class="na">clickLogin</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// then</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">SecondPage</span><span class="p">(</span><span class="n">driver</span><span class="p">).</span><span class="na">isDisplayed</span><span class="p">(),</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">takeScreenshot</span><span class="p">(</span><span class="s">&#34;secondPage.png&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h2 id="run-automated-appium-tests-on-aws-device-farm">Run automated Appium tests on AWS Device Farm</h2>
<p>The following steps are required to set up a project in AWS Device Farm to run Appium tests.
You need to create an AWS Device Farm project which is just an “organizational unit” that contains a configuration of your application. So, you can simply start by creating a mobile application project.</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/gaxj1tmfs8zw8tfwuxkf.png" alt="Image description">

</p>
<p>You can then see the project in the overview of your mobile projects.</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/qjsh1m65bouzbddeob1z.png" alt="Image description">

</p>
<p>Within the project, you can configure the automated tests and start a new run. In this setup, we want AWS Device Farm to spin up an Android application and automatically run the Appium tests when the device is ready. The other option here would be to provision a device for “remote access”. That would give you a “bare” device to use for various manual testing purposes.</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/xe2h7h2lylvylfnji0wj.png" alt="Image description">

</p>
<p>In the project, you have two options for what type of project you want to test on the device. It can be either a mobile application or a web application. In this guide, we will focus on an Android mobile application implemented using the Flutter framework. You will need to upload an apk file (Android Package) and upload it to AWS Device Farm. You can find your app-release.apk file in project-name/module-name/build/outputs/apk/ folder.</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/8zf4twww7vgyou7gmei9.png" alt="Image description">

</p>
<p>In the configuration section, you have the option to choose between a standard environment setup and a custom environment setup. A custom setup can be very useful if you need to perform some special steps before testing. A typical use case for a custom environment could be the setting of a specific Appium version.</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/9jo3lfm2q0xo8dcbsh9c.png" alt="Image description">

</p>
<p>The next step is to select some devices that can be used to run the mobile application. You can choose from more than 100 devices, and you can group devices into a device pool that can be reused. I selected a list of different devices from different vendors such as Samsung and Google. In general, the availability of Samsung devices is very good, while other vendors like Huawei are not available. I also recommend testing the application also on different versions of the Android operating systems in combination with different devices.</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/ay5d7aely75bpirkc8is.png" alt="Image description">

</p>
<p>If you want to load specific data onto the device, there is an upload option. You can also specify the device’s network settings  geolocation for the test run. This can be useful if you have scenarios where a geolocation is relevant, such as a location-based service using a map, or if you want to test your application with a bad Internet connection, meaning high latency or low bandwidth. In this case, you could also create a network profile. If you are running a multi-market or multi-language application, it might also be useful to have some variations on the locale settings. So, AWS Device Farm gives you a wide range of parameters to achieve the desired state of the device.</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/vc4txioe47z0qxo33vvf.png" alt="Image description">

</p>
<p>After setting the device state, you can start the automated test runs for which the live status is provided in an overview. A few minutes later, you will see the result of the test in the form of a pie chart showing the success rate of the tests performed.</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/h95yqyrcq8ildox4ak0x.png" alt="Image description">

</p>
<h2 id="check-the-results-of-the-automated-appium-tests">Check the results of the automated Appium tests</h2>
<p>When the test is complete, you can see the jobs, that were run and can drill down into the details of the test run. Typically, it takes about 2-3 minutes to start running tests because of the time it takes to select and prepare a device for you in the AWS Device Farm. After this preparation time, your automated tests will be executed on the specified device, and after execution, the device will be shut down. The result of the automated test run includes various artifacts such as screenshots of the test workflow on the device, a short video of the workflow, the test specification log, the log output, and a very basic performance dashboard of the automated test run that gives a good indication of the CPU and memory usage during the test on the device.</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/tegzn1arbcuh72ze5q3a.png" alt="Image description">

</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/5w4og5ze6m577k1v6nah.png" alt="Image description">

</p>
<p>
  <img src="/posts/img/AK-BuildingRunningFlutterOnAWS/5bhh4ogptbb42juve18j.png" alt="Image description">

</p>
<h2 id="setup-aws-device-farm-project-from-cli">Setup AWS Device Farm project from CLI</h2>
<p>If you do not want to perform all the steps manually, it may be more efficient to use the AWS CLI, which allows you to perform all the necessary steps from a shell script. Especially if you want to use a CI/CD tool like Jenkins, Gitlab, and others, these scripted steps can be useful for reuse within some pipeline jobs or steps.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#! /bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">echo</span> <span class="s2">&#34;Starting automatic deployment of Alex Sample App with Tests&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 1. Retrieve PROJECT_ARN</span>
</span></span><span class="line"><span class="cl"><span class="nv">PROJECT_NAME</span> <span class="o">=</span> <span class="s2">&#34;Alex Sample Project&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">PROFILE</span> <span class="o">=</span> <span class="s2">&#34;alex.dev&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">REGION</span> <span class="o">=</span> <span class="s2">&#34;us-west-2&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">PROJECT_ARN</span> <span class="o">=</span> aws devicefarm create-project --name <span class="nv">$PROJECT_NAME</span> --profile<span class="o">=</span>PROFILE --region<span class="o">=</span><span class="nv">$REGION</span> <span class="p">|</span> jq <span class="s1">&#39;.project.arn&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 2. Get Upload ARN and URL for Android App</span>
</span></span><span class="line"><span class="cl"><span class="nv">APP_FILE</span> <span class="o">=</span> <span class="s2">&#34;app-release.apk&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">APP_TYPE</span> <span class="o">=</span> <span class="s2">&#34;ANDROID_APP&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">APP_UPLOAD_JSON</span> <span class="o">=</span> aws devicefarm create-upload –project-arn <span class="nv">$PROJECT_ARN</span> –name <span class="nv">$APP_FILE</span> –type <span class="nv">$APP_TYPE</span> --profile<span class="o">=</span><span class="nv">$PROFILE</span> --region<span class="o">=</span><span class="nv">$REGION</span> <span class="p">|</span> jq <span class="s1">&#39;.upload&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">APP_UPLOAD_ARN</span> <span class="o">=</span> jq <span class="s1">&#39;.arn&#39;</span> <span class="nv">$APP_UPLOAD_JSON</span>
</span></span><span class="line"><span class="cl"><span class="nv">APP_UPLOAD_URL</span> <span class="o">=</span> jq <span class="s1">&#39;.url&#39;</span> <span class="nv">$APP_UPLOAD_JSON</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 3. Upload the app</span>
</span></span><span class="line"><span class="cl">curl -T app-release.apk <span class="nv">$APP_UPLOAD_URL</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 4. Get Upload ARN and URL for Test App</span>
</span></span><span class="line"><span class="cl"><span class="nv">TEST_FILE</span> <span class="o">=</span> <span class="s2">&#34;tests.zip&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">TEST_TYPE</span> <span class="o">=</span> <span class="s2">&#34;TEST_TYPE&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">TEST_UPLOAD_JSON</span> <span class="o">=</span> aws devicefarm create-upload –project-arn <span class="nv">$PROJECT_ARN</span> –name <span class="nv">$TEST_FILE</span> –type <span class="nv">$TEST_TYPE</span> --profile<span class="o">=</span><span class="nv">$PROFILE</span> --region<span class="o">=</span><span class="nv">$REGION</span> <span class="p">|</span> jq <span class="s1">&#39;.upload&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">TEST_UPLOAD_ARN</span> <span class="o">=</span> jq <span class="s1">&#39;.arn&#39;</span> <span class="nv">$TEST_UPLOAD_JSON</span>
</span></span><span class="line"><span class="cl"><span class="nv">TEST_UPLOAD_URL</span> <span class="o">=</span> jq <span class="s1">&#39;.url&#39;</span> <span class="nv">$TEST_UPLOAD_JSON</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 5. Upload the tests</span>
</span></span><span class="line"><span class="cl">curl -T tests.zip <span class="nv">$TEST_UPLOAD_URL</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 6. Create device pool</span>
</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_POOL_NAME</span> <span class="o">=</span> <span class="s2">&#34;SampleDevicePool&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_POOL_ARN</span> <span class="o">=</span> aws devicefarm create-device-pool –project-arn <span class="nv">$PROJECT_ARN</span> –name <span class="nv">$DEVICE_POOL_NAME</span> –rules <span class="s1">&#39;[{&#34;attribute&#34;: &#34;PLATFORM&#34;, &#34;operator&#34;: &#34;EQUALS&#34;, &#34;value&#34;: &#34;&#34;ANDROID&#34;&#34;}]&#39;</span>  --profile<span class="o">=</span><span class="nv">$PROFILE</span> --region<span class="o">=</span><span class="nv">$REGION</span> <span class="p">|</span> jq <span class="s1">&#39;.devicePool&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 7. Schedule test run</span>
</span></span><span class="line"><span class="cl"><span class="nv">SCHEDULE_RUN_NAME</span> <span class="o">=</span> <span class="s2">&#34;Sample-Test-Run&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">TEST_RUN_RESULT</span> <span class="o">=</span> aws devicefarm schedule-run –project-arn <span class="nv">$PROJECT_ARN</span> –app-arn <span class="nv">$APP_UPLOAD_ARN</span> –device-pool-arn <span class="nv">$DEVICE_POOL_ARN</span> –name <span class="nv">$SCHEDULE_RUN_NAME</span> –test <span class="s1">&#39;{&#34;type&#34;: &#34;TEST_TYPE&#34;,&#34;testPackageArn&#34;:&#34;&#39;</span> + <span class="nv">$TEST_UPLOAD_ARN</span> + <span class="s1">&#39;&#34;}&#39;</span>  --profile<span class="o">=</span><span class="nv">$PROFILE</span> --region<span class="o">=</span><span class="nv">$REGION</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$TEST_RUN_RESULT</span>
</span></span></code></pre></div><h2 id="summary">Summary</h2>
<p>This article has come to an end, and you now have a blueprint and hopefully a good feeling about how to automatically test a Flutter application on AWS Device Farm.
My experience with the AWS Device Farm and Android mobile applications has been quite good. The AWS Device Farm UI is simple, but includes the most important features for changing the state of the devices and supports the relevant testing frameworks. Most of the current devices on the market are available within 2 to 6 weeks of their launch. My observation is that the support for some device manufacturers is good (Samsung, Apple, Google), while some other manufacturers like Huawei are not widely supported. However, if you need some very specific devices, you can always make use of the &ldquo;private devices&rdquo; features, which is a BYOD (bring your own device) model.</p>
<h1 id="credits">Credits</h1>
<p>Title image by <a href="https://www.shutterstock.com/de/g/chombosan">metamorworks</a> on <a href="https://www.shutterstock.com">Shutterstock</a></p>

            
        </div>
        <div class="spacer"></div>
    </div>
    <div class="author-container">
        <figure class="author">
            <img src="../../authors/alexander-kroll.jpg" alt=""/>
            <figcaption>
                <h3><a href="/authors/alexander-kroll">Alexander Kroll</a><span>
                    
                </span></h3>
                <p>Head of Cloud Native Development </p>
                <p calss="author-socials">
                    
                    
                    <a target="_blank"  href="https://www.linkedin.com/in/alexander-kroll-33367716a"><i class="fa-brands fa-linkedin"></i></a>
                    
                </p>
                
                    
            </figcaption>
        </figure>
        
    </div>
    
    

    <div class="related-container">
        
        
        
        <div class="related-block">
            
            
            
            
                <h3 class="related-heading">You may also like</h3>

                
                
                <ul>
                    
                    
                    
                        <li><a class="related-link" href="/posts/ns-controlplaneoperatedinfrastructure_1/">CONTROL PLANE OPERATED INFRASTRUCTURE - Part 1: Introduction to Crossplane</a></li>
                    
                    
                    
                    
                        <li><a class="related-link" href="/posts/dd-fluttercicd-02-releases/">FLUTTER CI/CD WITH FASTLANE AND GITHUB ACTIONS - Part 2: Releases</a></li>
                    
                    
                    
                    
                        <li><a class="related-link" href="/posts/mjm-sa-otelmetrics-03-annotationbasedscraping/">TRANSITIONING FROM PROMETHEUS TO OPENTELEMETRY - A JOURNEY OF A CLUSTER&#39;S METRICS EVOLUTION - Part 3: Enabling annotation-based scraping</a></li>
                    
                    
                </ul>
                
            

        </div>
    </div>
    

    
    
    <div class="footer-wrapper">
        <div class="footer-container">
            <h2 class="footer">Article Tags</h2>
            

<ul class="tag-list-linked">
  
  <li><a href="https://nttdata-dach.github.io/tags/aws/">AWS</a> </li>
  
  <li><a href="https://nttdata-dach.github.io/tags/flutter/">Flutter</a> </li>
  
  <li><a href="https://nttdata-dach.github.io/tags/android/">Android</a> </li>
  
  <li><a href="https://nttdata-dach.github.io/tags/cloud/">Cloud</a> </li>
  
  <li><a href="https://nttdata-dach.github.io/tags/mobile/">Mobile</a> </li>
  
</ul>
        </div>
    </div>
    
</main>




</main>

<footer>
  <a href="/"><img src="/images/GlobalLogo_NTTDATA_White.png"></a>
  <nav>
    
    <a  href="/imprint">Imprint</a>
    
    <a  href="/privacy">Privacy Notice</a>
    
    <a  href="/legal">Legal Notice</a>
    
    <a  href="mailto:techblog@nttdata.com">Contact</a>
    
  </nav>

  <p class="text">Copyright 2025 NTT DATA Deutschland SE - This site does not use any cookies</p>

  <div>
    <span class="first"><a href="https://de.nttdata.com/" target="_blank" rel="noopener noreferrer">de.nttdata.com</a></span>
    
    <a class="top" href="#">back to top &#8679;</a>
  </div>

</footer>

<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]} })
</script>

</html>
